## 开发
0. 安装环境 [参考这里](#install)
1. 下载代码 git clone --branch menu-system https://github.com/fuybooo/vue-ts-admin.git
## <span id="install">环境</span>
## 运行
### 前提是环境装好，安装包什么的都准备就绪之后，依次运行
1. yarn g 【监听后端ts文件的变化，编译成js】
2. yarn s 【启动前端服务，监听前端文件的变化并重启服务】
3. yarn d 【启动数据库服务】
4. yarn w 【启动后端服务，监听后端文件变化并重启服务】
## 部署
1. yarn b
2. yarn i
3. yarn n
## 2019-06-08
1. npm -v
2. npm install -g npm
3. yarn global add @vue/cli@latest
4. vue -V
5. vue create vue-ts-admin
6. cd vue-ts-admin
7. 新增配置文件
    1. vue.base.config.js [配置可参考](https://cli.vuejs.org/zh/config/)
    2. vue的ts写法 [参考该文档](https://github.com/kaorun343/vue-property-decorator)
## 2019-06-11
1. 创建此项目的首要目的是搭建一个大型项目的框架，理清楚在大型项目的开发中遇到的问题，已经总结整体的解决方案
    1. 首先面对的问题是项目的目录结构问题
    2. 路由结构
2. 遇到一些问题
    1. 可以在config.ts中配置一些公共的环境变量，通过process.env.NODE_ENV完成
    2. 将urls 和https 挂载到vue的原型上，这样使用起来更加得心应手
## 2019-06-13
1. 解决vue垫片不识别的问题：定义接口之前，需要先导入vue
## 2019-06-14
1. 搭建项目目录
2. 初始化工程，实现登录
3. 困难
    1. css的摇树优化不知如何实现
## 2019-06-17
1. 初步完成国际化
2. 待实现：title的切换与国际化
## 2019-06-18
1. mock数据应该放在public文件夹中
## 2019-07-08
1. 截至目前，已初步完成table和form两大通用组件
## 2019-07-16
1. 指定环境
    1. 启动项目时
    ```bash
      --open    在服务器启动时打开浏览器
      --copy    在服务器启动时将 URL 复制到剪切版
      --mode    指定环境模式 (默认值：development)
      --host    指定 host (默认值：0.0.0.0)
      --port    指定 port (默认值：8080)
      --https   使用 https (默认值：false)
    ```
## 2019-07-20
1. 将代码部署到github上去 git subtree push --prefix=dist origin gh-pages
## 2019-07-22
1. 开始使用node + mongodb 提供服务端功能
    1. 搭建node开发环境
    2. 搭建框架 - 到达 controller 层
## 2019-07-23
1. 后端已经能够基本运行起来
2. 现在做个小结
    1. 开发
        1. 前端
            1. 执行yarn s 使用 BUILD_MODE 作为环境变量，启动不同的功能
            2. 打包部署时需要注意跟路径
            3. 连接后端api的域名配置需要做到可切换
            4. 难点：当项目足够大时，打包是否会成为一个难点
                1. 可以使用create.js批量生产module，当module足够大时，进行打包优化测试
        2. 后端
            1. 开发阶段需要执行 yarn g ---- 将ts转化为js
            2. yarn w ---- 监听nodejs的变化并启动后端服务
            3. 使用nodemon运行时加上--inspect可以在chrome中进行后端代码的调试
            4. 难点：启用websocket plugin时如何处理
        3. 数据库
            1. 开发阶段启动数据库 /usr/local/momgodb../bin 执行 ./mongod --dbpath ~/Data/db
            2. 创建admin下的用户，该用户将具有较高权限
            3. 难点：在新环境上模拟给客户部署服务
                1. 需要初始化数据的脚本
                2. 需要安装各种软件
## 2019-07-25
1. 遇到一个问题卡住了，设置 cookie 后，不生效
## 2019-07-26
1. 创建用户
2. 后端返回值需要格式化，将数据的返回结果加入id
3. 创建 编辑都返回id
## 2019-07-31
1. 接下来的研究重点
    1. 大型项目的打包问题
        1. 使用一个入口打包的话几乎不可能
            1. 打包时总是内存益处
            2. 打包时间非常长，开发时实时编译也几乎不可能做到
        2. 使用多个入口
            1. 公共代码单独打包并应该与业务代码抽离
                1. 第三方代码单独打包 如 element-ui等
                2. 系统核心代码单独打包 如 工具类 通用基础方法 通用设置等
                3. 系统公共组件单独打包 如 表格 表单 等
                4. 大型第三方库单独打包 如 uedit等
                5. 各个业务模块作为不同入口打包
                    1. 注意
                        1. 各模块不应该过大或过小 生成的文件大小以500kb作为标准
        3. 项目的写法技巧
            1. 除了首页，其他页面均使用异步加载
            2. 项目的目录结构严格按照规则进行创建
2. 各目录分别用来做什么的需要有一个说明文档
## 2019-08-03
1. 关于大型前端应用开发的一些思考
    1. 公共资源一次编写，各处使用
    2. 各个独立的业务模块尽量松耦合
        1. 互相完全没有依赖关系
        2. 可以都引用相同的组件
        3. 组件不能有业务逻辑
    3. 若只关心某一个模块的开发，则可以只启动该模块的服务
    4. 发布代码也是一样，若只对某个模块进行了更改，则只发布该模块即可
## 2019-08-08
1. 进入系统首页，欢迎页，介绍系统，申请试用按钮
2. 点击申请试用 创建租户
3. 创建该租户的超管
4. 使用超管创建该租户下等其他用户，字典，机构等
5. 终极管理员可以对租户，等进行操作
## 2019-08-22
1. 建立前后端公共的空间 shared 文件夹，使得前后端可以公用同一份代码
    1. 遇到的坑
        1. ts的编译，编译过程会提示 shared 不在 rootDir中
        2. 编译出来的文件夹的位置还不能随心所欲的控制，文件的相对路径不是很好解决
2. 解决环境变量紊乱的问题
    1. 通过 shared 中的 env 暴露出来的判断环境变量的方法进行统一的判断
    2. 现在环境变量不会存在模糊的定义，只有两种
        1. 判断当前是开发环境还是生产环境
        2. 判断当前的运行环境是什么【只有在不同租户有不同需求时才会用到，这是为以后做的准备】
## 2019-08-29
1. 增加中央事件机制
    1. 发布事件 示例： this.$globalEvent.$emit(this.$event.researchMenu)
    2. 订阅事件 示例： this.$globalEvent.$on(this.$event.researchMenu, this.list)